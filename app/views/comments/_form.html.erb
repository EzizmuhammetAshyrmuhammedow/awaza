<%= form_with model: comment, url: hotel_comments_path(@hotel), data: { turbo: false } do |f| %>
  <div class="mb-4">
    <%= f.label :content, "Your Comment/Review", class: "block font-semibold text-gray-700" %>
    <%= f.rich_text_area :content, class: "form-input w-full", class: 'w-full border-gray-300 rounded-lg shadow-sm'%>
  </div>

  <div class="mb-4">
    <%= f.label :isReview, "Is this a review?", class: "h-5 w-5 text-blue-600 border-gray-300 rounded" %>
    <%= f.check_box :isReview, class: "ml-2 text-gray-700 font-medium" %>
  </div>

  <!-- Show rating fields only if it's a review -->
  <div id="review-fields" style="display: none;">
    <div class="mb-4">
      <%= f.label :food_rating, "Food Rating", class: "block font-semibold text-gray-700" %>
      <%= f.number_field :food_rating, min: 1, max: 5, class: "w-full border-gray-300 rounded-lg shadow-sm" %>
    </div>
    <div class="mb-4">
      <%= f.label :room_rating, "Room Rating", class: "block font-semibold text-gray-700" %>
      <%= f.number_field :room_rating, min: 1, max: 5, class: "w-full border-gray-300 rounded-lg shadow-sm" %>
    </div>
    <div class="mb-4">
      <%= f.label :service_rating, "Service Rating" , class: "block font-semibold text-gray-700"%>
      <%= f.number_field :service_rating, min: 1, max: 5, class: "w-full border-gray-300 rounded-lg shadow-sm" %>
    </div>
    <div class="mb-4">
      <%= f.label :entertainment_rating, "Entertainment Rating", class: "block font-semibold text-gray-700" %>
      <%= f.number_field :entertainment_rating, min: 1, max: 5, class: "w-full border-gray-300 rounded-lg shadow-sm" %>
    </div>
  </div>

  <!-- Conditional Submit Buttons -->
  <div class="flex space-x-4">
    <%= f.submit "Submit Review", class: "bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded cursor-pointer", id: "submit-review", style: "display: none;" %>
    <%= f.submit "Submit Comment", class: "bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded cursor-pointer", id: "submit-comment" %>
  </div>
<% end %>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const isReviewCheckbox = document.querySelector("#comment_isReview");
        const reviewFields = document.querySelector("#review-fields");
        const submitReviewBtn = document.querySelector("#submit-review");
        const submitCommentBtn = document.querySelector("#submit-comment");

        function toggleReviewFields() {
            if (isReviewCheckbox.checked) {
                reviewFields.style.display = "block";
                submitReviewBtn.style.display = "inline-block";
                submitCommentBtn.style.display = "none";
            } else {
                reviewFields.style.display = "none";
                submitReviewBtn.style.display = "none";
                submitCommentBtn.style.display = "inline-block";
            }
        }

        isReviewCheckbox.addEventListener("change", toggleReviewFields);
        toggleReviewFields(); // Ensure proper state on page load
    });
</script>
