<nav class="bg-zinc-200 dark:bg-zinc-900 flex items-center justify-between p-4 fixed top-0 w-full z-50">
  <!-- Logo -->
  <a class="text-3xl" href="/">Awaza</a>

  <!-- Desktop Menu -->
  <ul class="hidden lg:flex flex-row gap-3 items-center list-none m-0">
    <% [
         { name: t('home'), path: root_path },
         { name: t('hotel.hotels.plural'), path: hotels_path }
       ].each do |item| %>
      <li>
        <%= link_to item[:name],
                    item[:path],
                    data: { turbo: "true" },
                    class: "#{'font-bold' if current_page?(item[:path])}",
                    aria: { current: current_page?(item[:path]) ? "page" : nil } %>
      </li>
    <% end %>
    <% if @user&.admin? %>
      <li>
        <%= link_to t('dashboard'),
                    dashboard_path,
                    class: "border border-green-600 rounded-md p-2 hover:opacity-80 cursor-pointer active:opacity-60 #{'font-bold' if current_page?(dashboard_path)}" %>
      </li>
    <% end %>
    <li>
      <button data-controller="theme" data-action="click->theme#toggle" class="p-2 bg-gray-500 rounded-md dark:bg-gray-800 text-gray-800 dark:text-gray-200">
        Toggle Dark Mode
      </button>
    </li>
    <% unless helpers.authenticated? %>
      <li>
        <%= link_to t('auth.sign_up'),
                    new_registration_path,
                    data: { turbo: "true" },
                    class: "rounded-md p-2 bg-green-500 hover:opacity-80 cursor-pointer active:opacity-60 #{'font-bold' if current_page?(new_registration_path)}",
                    aria: { current: current_page?(new_registration_path) ? "page" : nil } %>
      </li>
      <li>
        <%= link_to t('auth.log_in'),
                    new_session_path,
                    data: { turbo: "true" },
                    class: "rounded-md p-2 border border-green-800 hover:opacity-80 cursor-pointer active:opacity-60 #{'font-bold' if current_page?(new_session_path)}",
                    aria: { current: current_page?(new_session_path) ? "page" : nil } %>
      </li>
    <% end %>
    <% if helpers.authenticated? %>
      <li>
        <%= button_to t('auth.log_out'), session_path, method: :delete, class: "rounded-md p-2 bg-red-500 hover:opacity-80 cursor-pointer active:opacity-60" %>
      </li>
    <% end %>
    <li>
      <%= render 'index/lang_switch' %>
    </li>
  </ul>

  <!-- Mobile Menu Button & Drawer -->
  <div class="lg:hidden" x-data="{ open: false }">
    <!-- Hamburger button -->
    <button @click="open = !open" class="focus:outline-none">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path x-show="!open" stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
        <path x-show="open" stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>

    <!-- Mobile Drawer -->
    <div x-show="open" x-cloak class="absolute top-0 left-0 w-72 bg-zinc-200 dark:bg-zinc-900 shadow-md min-h-[100dvh]">
      <ul class="flex flex-col gap-2 list-none p-2 mt-12">
        <% [
             { name: t('home'), path: root_path },
             { name: t('hotel.hotels.plural'), path: hotels_path }
           ].each do |item| %>
          <li>
            <%= link_to item[:name],
                        item[:path],
                        data: { turbo: "true" },
                        class: "block #{'font-bold' if current_page?(item[:path])}",
                        aria: { current: current_page?(item[:path]) ? "page" : nil } %>
          </li>
        <% end %>
        <% if @user&.admin? %>
          <li>
            <%= link_to t('dashboard'),
                        dashboard_path,
                        class: "block border border-green-600 rounded-md p-2 hover:opacity-80 cursor-pointer active:opacity-60 #{'font-bold' if current_page?(dashboard_path)}" %>
          </li>
        <% end %>
        <li>
          <button data-controller="theme" data-action="click->theme#toggle" class="w-full text-left p-2 bg-gray-500 rounded-md dark:bg-gray-800 text-gray-800 dark:text-gray-200">
            <%= t('toggle_dark_mode') %>
          </button>
        </li>
        <% unless helpers.authenticated? %>
          <li>
            <%= link_to t('auth.sign_up'),
                        new_registration_path,
                        data: { turbo: "true" },
                        class: "block rounded-md p-2 bg-green-500 hover:opacity-80 cursor-pointer active:opacity-60 #{'font-bold' if current_page?(new_registration_path)}",
                        aria: { current: current_page?(new_registration_path) ? "page" : nil } %>
          </li>
          <li>
            <%= link_to t('auth.log_in'),
                        new_session_path,
                        data: { turbo: "true" },
                        class: "block rounded-md p-2 border border-green-800 hover:opacity-80 cursor-pointer active:opacity-60 #{'font-bold' if current_page?(new_session_path)}",
                        aria: { current: current_page?(new_session_path) ? "page" : nil } %>
          </li>
        <% end %>
        <% if helpers.authenticated? %>
          <li>
            <%= button_to t('auth.log_out'), session_path, method: :delete, class: "block rounded-md p-2 bg-red-500 hover:opacity-80 cursor-pointer active:opacity-60" %>
          </li>
        <% end %>
        <li>
          <%= render 'index/lang_switch' %>
        </li>
      </ul>
    </div>
  </div>
</nav>
